---
import Layout from '../layouts/Layout.astro';
import { getCollection } from 'astro:content';

const notes = await getCollection('garden');

const stageColors: Record<string, string> = {
	seedling: 'text-emerald-400',
	budding: 'text-amber-400',
	evergreen: 'text-blue-400'
};
---

<Layout title="Digital Garden | Between Binary">
	<nav class="fixed w-full z-50 bg-[#050505]/80 backdrop-blur-md border-b border-white/5">
		<div class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center">
			<a href="/" class="text-2xl font-bold font-mono tracking-tighter text-white">
				BETWEEN <span class="text-amber-200">BINARY</span>
			</a>
			<div class="hidden md:flex space-x-8 text-sm font-light tracking-wide text-gray-300">
				<a href="/garden" class="text-amber-200 transition-colors">GARDEN</a>
				<a href="/lab" class="hover:text-amber-200 transition-colors">LAB</a>
				<a href="/thoughts" class="hover:text-amber-200 transition-colors">THOUGHTS</a>
				<a href="/about" class="hover:text-amber-200 transition-colors">ABOUT</a>
			</div>
		</div>
	</nav>

	<main class="pt-32 pb-20 px-6 font-sans min-h-screen">
		<div class="max-w-7xl mx-auto">
			<header class="mb-16">
				<div class="inline-block px-4 py-1 text-xs font-mono text-emerald-200 border border-emerald-900/50 rounded-full bg-emerald-900/10 tracking-widest mb-4">
					CULTIVATING KNOWLEDGE
				</div>
				<h1 class="text-5xl md:text-7xl font-bold font-serif text-white mb-6">
					The <span class="text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-emerald-600">Garden</span>
				</h1>
				<p class="text-xl text-slate-300 font-light max-w-2xl">
					A collection of evolving notes, thoughts, and resources. Not a blog, but a living network of ideas.
				</p>
			</header>

			<div class="grid grid-cols-1 md:grid-cols-3 gap-6">
				{notes.map((note) => (
					<a href={`/garden/${note.slug}/`}>
						<div class="p-6 rounded-2xl bg-white/5 border border-white/5 hover:bg-white/10 transition-colors h-full flex flex-col">
							<span class={`${stageColors[note.data.stage] || 'text-slate-400'} text-xs font-mono mb-2 block uppercase tracking-wider`}>
								{note.data.stage}
							</span>
							<h3 class="text-xl font-bold text-white mb-2">{note.data.title}</h3>
							<p class="text-slate-400 text-sm mb-4 flex-grow">{note.data.description}</p>
							<div class="flex flex-wrap gap-2">
								{note.data.tags && note.data.tags.slice(0, 2).map((tag: any) => (
									<span class="px-2 py-1 bg-white/5 rounded text-xs text-slate-500">#{tag}</span>
								))}
							</div>
						</div>
					</a>
				))}
			</div>
		</div>
	</main>
</Layout>
