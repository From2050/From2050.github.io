---
import { getCollection } from 'astro:content';
import Layout from '../../layouts/Layout.astro';
import Header from '../../components/Header.astro';

export async function getStaticPaths() {
	const posts = await getCollection('thoughts');
	return posts.map((post) => ({
		params: { slug: post.slug },
		props: post,
	}));
}

const post = Astro.props;
const { Content } = await post.render();
---

<Layout title={`${post.data.title} | Thoughts`}>
	<Header />

	<main class="pt-32 pb-20 px-6 font-sans min-h-screen">
		<article class="max-w-3xl mx-auto prose prose-invert prose-amber lg:prose-xl">
			<div class="mb-10 not-prose">
				<div class="text-amber-500 font-mono text-sm mb-2">
					{post.data.pubDate.toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' })}
				</div>
				<h1 class="text-4xl md:text-5xl font-bold font-serif text-white mb-4">{post.data.title}</h1>
				<div class="flex gap-2">
					{post.data.tags && post.data.tags.map((tag: any) => (
						<span class="px-2 py-1 bg-white/5 rounded text-xs text-slate-400">#{tag}</span>
					))}
				</div>
			</div>
			
			<Content />
		</article>
	</main>
</Layout>
