---
import { getCollection } from 'astro:content';
import Layout from '../../layouts/Layout.astro';
import Header from '../../components/Header.astro';

export async function getStaticPaths() {
	const projects = await getCollection('lab');
	return projects.map((project) => ({
		params: { slug: project.slug },
		props: project,
	}));
}

const project = Astro.props;
const { Content } = await project.render();
---

<Layout title={`${project.data.title} | Lab`}>
	<Header />

	<main class="pt-32 pb-20 px-6 font-sans min-h-screen">
		<article class="max-w-5xl mx-auto">
			<header class="mb-12 border-b border-white/10 pb-12">
				<div class="flex items-center gap-4 mb-4">
					<span class="px-3 py-1 bg-amber-900/20 text-amber-200 border border-amber-900/50 rounded-full text-xs font-mono uppercase tracking-widest">
						{project.data.status}
					</span>
					{project.data.repoUrl && (
						<a href={project.data.repoUrl} target="_blank" class="text-slate-400 hover:text-white transition-colors">
							<i class="fab fa-github"></i> Repository
						</a>
					)}
				</div>
				<h1 class="text-5xl md:text-7xl font-bold font-serif text-white mb-6 leading-tight">{project.data.title}</h1>
				<p class="text-xl text-slate-300 font-light max-w-2xl">{project.data.description}</p>
				
				<div class="flex gap-2 mt-6">
					{project.data.stack && project.data.stack.map((tech: any) => (
						<span class="px-3 py-1 bg-white/5 rounded-full text-sm text-slate-300 border border-white/5">{tech}</span>
					))}
				</div>
			</header>

			<div class="prose prose-invert prose-lg max-w-none">
				<Content />
			</div>
		</article>
	</main>
</Layout>
