---
import { getCollection } from 'astro:content';
import Layout from '../../layouts/Layout.astro';
import Header from '../../components/Header.astro';
import ArticleLayout from '../../components/ArticleLayout.astro';

export async function getStaticPaths() {
	const projects = await getCollection('lab');
	return projects.map((project) => ({
		params: { slug: project.slug },
		props: project,
	}));
}

const project = Astro.props;
const { Content } = await project.render();
---

<Layout title={`${project.data.title} | Lab`}>
	<Header />

	<main class="pt-32 pb-20 px-6 min-h-screen">
		<article class="max-w-4xl mx-auto">
			<header class="max-w-[680px] mx-auto mb-12">
				<div class="flex items-center gap-4 mb-6">
					<span class="px-3 py-1 bg-amber-900/20 text-amber-200 border border-amber-900/50 rounded-full text-xs font-mono uppercase tracking-widest">
						{project.data.status}
					</span>
					{project.data.repoUrl && (
						<a href={project.data.repoUrl} target="_blank" class="text-slate-400 hover:text-white transition-colors text-sm">
							<i class="fab fa-github"></i> Repository
						</a>
					)}
				</div>
				<h1 class="text-4xl md:text-5xl font-bold text-white mb-6 leading-[1.15] tracking-tight" style="font-family: 'Source Serif 4', Georgia, serif;">
					{project.data.title}
				</h1>
				<p class="text-lg text-slate-300 font-light leading-relaxed" style="font-family: 'Source Serif 4', Georgia, serif;">
					{project.data.description}
				</p>
				
				<div class="flex flex-wrap gap-2 mt-6">
					{project.data.stack && project.data.stack.map((tech: any) => (
						<span class="px-3 py-1 bg-white/5 rounded-full text-sm text-slate-400 border border-white/5 font-mono">{tech}</span>
					))}
				</div>
			</header>

			<ArticleLayout>
				<Content />
			</ArticleLayout>
		</article>
	</main>
</Layout>
